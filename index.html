<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<style>
			.font-sans {
			  font-family: 'Lato', 'SimHei', 'STHeiti', 'SimHei', 'Serif';
			}
			.font-serif {
			  font-family: 'Source Serif Pro', 'Songti SC', 'SimSun', 'Serif', serif;
			}
		  </style>
		<style>		
			.reveal .slides {
			  border: 1.5px #ddd solid;
			  border-radius: 7px;
			}
			
			.reveal h1, .reveal h2, .reveal h3, .reveal h4 {
			  font-family: 'Lato', 'SimHei', 'STXihei', 'Sans Serif';
			  font-weight: 400;
			}
			
			.reveal p, .reveal li, .reveal center {
			  font-size: 32px;
			  font-family: 'Lato', 'STHeiti', 'SimHei', 'Sans Serif';
			}
			

			.reveal ul {
			  display: block;
			  text-align:left;
			}
			
			.reveal p, .reveal h1, .reveal h2, .reveal h3, .reveal h4, .reveal h5 {
			  padding:  0 25px 0 25px;
			}
			
			.reveal table {
			  font-size: 32px;
			  font-family: 'Lato', 'STHeiti', 'SimHei', 'Sans Serif';
			  margin-top: 15px;
			  margin-bottom: 15px;
			}
			
			.reveal th {
			  background-color: #eee;
			}
			
			.reveal tr:nth-child(even) {
			  background-color: #efffff;
			}
			
			.reveal h1,
			.reveal h2,
			.reveal h3,
			.reveal h4,
			.reveal h5,
			.reveal h6 {
			  text-align: left;
			  margin: 0 0 20px 0;
			 color: #222; 
			  font-weight: 400;
			  line-height: 1.2;
			  letter-spacing: normal;
			}
			.reveal h1 {
			  margin: 0 10 0 10;
			  font-size: 60px;
			}
			.reveal .middle h1 {
			  text-align: center;
			}
			
			.reveal h2 {
			  font-size: 48px;
			  border-bottom: 2px solid rgb(255, 0, 0);
			  padding-bottom: 5px;
			}
			.reveal h3 { 
			  font-size: 1.10em;
			  border-bottom: 2px solid rgb(106, 0, 95);
			  padding-bottom: 5px; 
			}
			.reveal h4 { 
			  font-size: 1.05em;
			}
			.reveal h5 { 
			  font-size: 1.05em;
			  border-bottom: 2px solid rgb(106, 0, 95);
			  padding-bottom: 5px; 
			}	
			
			.reveal pre {
			  font-size: 28px;
			 
			  background-color: #eee;
			
			  border-radius: 3mm;
			  padding: 10px 10px 10px 10px;
			}
			
			.reveal pre code {
			  max-height: none;
			}
			
			.reveal code {
			  font-family: 'Inconsolata', 'STKaiti', 'KaiTi', 'Sans Serif', Monospace;
			}
			
			
			
			.reveal .middle blockquote a {
			  color: inherit;
			}
			
			.reveal blockquote p, .reveal blockquote li {
			  font-family: 'Lato', 'STKaiti', 'KaiTi', 'Sans Serif';
			}
			
			
			.reveal .author-affiliation img {
			  margin: 15px 0 0 0;
			}
			
			.reveal .author-affiliation {
			  display: inline-block;
			  font-size: 90%;
			}
			.reveal hr {
			  border: 10px solid rgba(0, 0, 0, 0);
			}
			.reveal li {
			  margin-top: 10px;
			}
			</style>
		<title>年度小结</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/simple.css">
		<link rel="icon" href="images/title.jpeg">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-background-image="images/background.jpeg" data-background-size="1800px">
					<div><div style="width:100%" ><h2>2022年度总结</h2></div>
					<h4>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
						&emsp;&emsp;&emsp;&emsp;汇报人：朱奇正</h4>
					</div>
				</section>
				<section data-background-image="images/背景.png" data-background-size="1700px">
					<section data-markdown>
					<div text-align: left>
					<textarea data-template>
						##### 所做的工作/所学的内容<br>
						- Yocto &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
						&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<br>
						- CI<br>
						- xv6<br>
					</textarea>
					</div>
					</section>
				</section>
				<section data-background-image="images/background.jpeg" data-background-size="1800px">
					<section data-markdown>
					<textarea data-template>
						### Yocto
						-  Yocto是什么？ <br>
							类似于[LFS(Linux From Scratch)](https://www.linuxfromscratch.org/lfs/)的集成化工具。<br>
							[一个能够一键生成操作系统镜像，sdk等的开发工具](https://docs.yoctoproject.org/).<br>
						---
						### Yocto
						-  Yocto中涉及什么？<br>
							涉及的范围很广（却不深）
							- 包括众多的编译工具([autotools](https://www.gnu.org/software/automake/manual/html_node/Autotools-Introduction.html)，[cmake](https://cmake.org/)，[ninja](https://ninja-build.org/)等)。
							- 完整的编译的流程(Native Compile，Cross Compile，[Canadian Cross Compile](https://en.wikipedia.org/wiki/Cross_compiler#Canadian_Cross))
							- 整个操作系统的启动流程(pmon，[uefi](https://en.wikipedia.org/wiki/UEFI)，[initramfs](https://en.wikipedia.org/wiki/Initial_ramdisk)，[rootfs](https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard)，[kernel](https://en.wikipedia.org/wiki/Linux_kernel)等)
							- 一系列构建系统所需要的软件包([Binutils](https://en.wikipedia.org/wiki/GNU_Binutils)，[Glibc](https://en.wikipedia.org/wiki/Glibc)，[Ncurses](https://en.wikipedia.org/wiki/Ncurses)等)
							- ...
						---
						### Yocto工作流程
						![Yocto工作流程](./images/yp-how-it-works-new-diagram.png)
						---
						### Yocto
						- 所做的工作
							- 学习yocto的使用方法，构建原理
							- 在loongarch的服务器上部署docker
							- 重新梳理旧版loongos的yocto项目，使之能够一键构建成loongarch架构的可正常运行的weston镜像以及sdk。
							```
							bitbake loongos-weston
							bitbake -c populate_sdk meta-toolchain-loongos-sdk
							```
							- 参与了一部分新版loongos的构建工作
					  </textarea>
					</section>	
				</section>
				<section data-background-image="images/background.jpeg" data-background-size="1800px">
					<section data-markdown>
						<textarea data-template>
							### CI(Continuous integration)
							- 维护的代码库<br>
							&emsp;[poky](https://github.com/foxsen/poky)&emsp;&emsp;[meta-loongson](https://github.com/foxsen/meta-loongson)
							- 自动构建(包括代码库的更新，每日的自动构建等)
							- 构建成功后自动进行功能测试
							---
							### CI(Continuous integration)
							- 主要选用[buildbot](http://docs.buildbot.net/current/tutorial/)作为构建引擎
							- 以yocto社区中的autobuilder系统作为loongos的CI基础
							---
							### buildbot工作流程
							![buildbot工作流程](./images/buildbot.png)
							---
							### CI自动构建示例
							```python
							targets = utils.getconfigvar("BBTARGETS", ourconfig, args.target, stepnum)
							if targets:
								if jcfg:
									addstepentry("build-targets", "Build targets", shortdesc, desc, str(targets), str(stepnum))
								elif args.stepname == "build-targets":
									hp.printheader("Step %s/%s: Running bitbake %s" % (stepnum, maxsteps, targets))
									bitbakecmd(args.builddir, "bitbake %s -k" % targets, report, stepnum, args.stepname)
							```
							---
							### CI自动测试示例
							```python
							def test_reboot(self):
								output = ''
								count = 0
								(status, output) = self.target.run('reboot -h')
								while count < 5:
									time.sleep(5)
									cmd = 'ping -c 1 %s' % self.target.ip
									proc = Popen(cmd, shell=True, stdout=PIPE)
									output += proc.communicate()[0].decode('utf-8')
									if proc.poll() == 0:
										count += 1
									else:
										count = 0
								msg = ('Expected 5 consecutive, got %d.\n'
								   	'ping output is:\n%s' % (count,output))
								self.assertEqual(count, 5, msg = msg)
							```
							---
							### CI(Continuous integration)
							- 所做的工作
								- 大致了解了整个autobuilder系统的运行原理
								- 在本地初步构建了autobuilder系统
						</textarea>
					</section>
				</section>
				<section data-background-image="images/background.jpeg" data-background-size="1800px">
					<section data-markdown>
						<textarea data-template>
							### xv6
							- 完成实验进度(7/10)...
						</textarea>
					</section>
				</section>
				<section data-background-image="images/background.jpeg" data-background-size="1800px">
					<section data-markdown data-auto-animate>
						<textarea data-template>
						### 总结与不足
						---
						### 总结与不足
						- 对整个操作系统有了一个较为完整和全面的认识
						- 懂得了如何更加高效的学习（读手册，读源码，多写，多试）
						- 在工作过程中做的还不够彻底，学的不够透彻
						- 与他人之间沟通交流不足
						</textarea>
					</section>
				</section>
				<section data-background-image="images/background.jpeg" data-background-size="1800px">
					<section data-markdown data-auto-animate>
						<textarea data-template>
						### 展望
						---
						### 展望
						- 在工作中完成的更好
						- 在学习中学的更加透彻
						- 在空余时间完成更多的实验（[CS 144](https://cs144.github.io/)，[PA实验](https://nju-projectn.github.io/ics-pa-gitbook/ics2022/)等）
						- 与他人进行更多的沟通，交流与学习
						</textarea>
					</section>
				</section>
				<section data-background-image="images/background.jpeg" data-background-size="1800px">
					<h2 >&emsp;&emsp;&emsp;&emsp;谢谢！</h2>
				</section>
				<section data-background-image="images/尾页.png" data-background-size="1700px">

				</section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
